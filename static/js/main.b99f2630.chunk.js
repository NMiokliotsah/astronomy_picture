(this.webpackJsonpnasa=this.webpackJsonpnasa||[]).push([[0],{11:function(e,a,t){e.exports={wrapper:"Gallery_wrapper__1pmyQ",gallery:"Gallery_gallery__zFfKp",altImage:"Gallery_altImage__2m8w6",galleryItem:"Gallery_galleryItem__1IsTl"}},23:function(e,a,t){e.exports={wrapper:"Spinner_wrapper__239dC"}},30:function(e,a,t){e.exports={calendar:"Calendar_calendar__2Hew1"}},34:function(e,a,t){e.exports=t(48)},39:function(e,a,t){},40:function(e,a,t){},46:function(e,a,t){},47:function(e,a,t){},48:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),l=t(15),c=t.n(l),o=(t(39),t(40),t(2)),i=t(17),s=t(18),m=t(21),u=t(20),d=t(8),g=t.n(d),p=t(23),h=t.n(p),v=function(){return r.a.createElement("div",{className:h.a.wrapper},r.a.createElement("div",{className:"spinner-border text-primary "+h.a.spinner,role:"status"},r.a.createElement("span",{className:"sr-only"},"Loading...")))},f=t(30),E=t.n(f),y=function(e){return r.a.createElement("div",{className:E.a.calendar},r.a.createElement("input",{name:e.name,type:"date",value:e.value,onChange:e.onChange}))},b=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:g.a.wrapper},r.a.createElement("div",{className:g.a.picture},e.isFetching&&r.a.createElement(v,null),e.error?r.a.createElement("p",{className:g.a.error},e.error):!e.isFetching&&r.a.createElement("img",{src:e.imageUrl,alt:""})),r.a.createElement("div",{className:g.a.imgInfo},r.a.createElement("h2",null,"Astronomy picture of the day"),r.a.createElement("p",null,"Each day a different image or photograph of our fascinating universe is featured, along with a brief explanation written by a professional astronomer."),e.explanation&&r.a.createElement("h4",null,"Explanation of today's image"),r.a.createElement("p",null,e.explanation),r.a.createElement("div",{className:g.a.test},r.a.createElement(y,{name:"Calendar",value:e.date,onChange:e.handlerCalendar}),r.a.createElement("button",{disabled:e.isAdd||e.error||e.isFetching,className:"btn btn-secondary "+g.a.addImageBtn,onClick:e.onClickButton},"Add picture to gallery")))))},_=function(e){return fetch("https://api.nasa.gov/planetary/apod?api_key=".concat("3JTXJIJ51tHe1R0q9iq3VbgXJxq7moRTUxaeBsa2","&date=").concat(e)).then((function(e){return e.json()}))},w=function(e){var a=new Date(e),t=""+(a.getMonth()+1),n=""+a.getDate(),r=a.getFullYear();return t.length<2&&(t="0"+t),n.length<2&&(n="0"+n),[r,t,n].join("-")},I=function(e){return!e||!e.includes("image")},k=t(10),C=t(32),S=t(27),j={img:[]},x=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"SET_IMG":return Object(S.a)(Object(S.a)({},e),{},{img:[].concat(Object(C.a)(e.img),[a.img])});default:return e}},N=function(e){Object(m.a)(t,e);var a=Object(u.a)(t);function t(e){var n;return Object(i.a)(this,t),(n=a.call(this,e)).checkImg=function(e){n.props.img.forEach((function(a){w(a.date)===e&&n.setState({isAdd:!0})}))},n.onClickButton=function(){n.state.error||(n.props.setImage(n.state.imageUrl,n.state.date),n.setState({isAdd:!0}))},n.handleImgError=function(e,a){e?(n.setState({error:"Image does not exists"}),n.setState({explanation:null}),n.setState({isFetching:!1})):(n.setState({imageUrl:a.url}),n.setState({explanation:a.explanation}),n.setState({error:null}),n.setState({isFetching:!1}))},n.handlerCalendar=function(e){var a=e.target.value;n.setState({isAdd:!1}),n.checkImg(a),function(e){var a=w(new Date);w(e)===a&&localStorage.removeItem("date")}(a),n.setState({error:null}),(e.target.name="calendar")&&(n.setState({date:a}),function(e){w(new Date(e))!==w(new Date)&&localStorage.setItem("date",e)}(a),n.setState({isFetching:!0}),_(a).then((function(e){var a=I(e.url);n.handleImgError(a,e)})))},n.state={imageUrl:null,explanation:null,error:null,date:w(new Date),isFetching:!1,isAdd:!1},n}return Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this,a=localStorage.getItem("date");a&&this.setState({date:a});var t=a||this.state.date;this.checkImg(t),this.setState({isFetching:!0}),_(t).then((function(a){var t=I(a.url);e.handleImgError(t,a)}))}},{key:"render",value:function(){return r.a.createElement(b,{imageUrl:this.state.imageUrl,handlerCalendar:this.handlerCalendar,date:this.state.date,error:this.state.error,isFetching:this.state.isFetching,onClickButton:this.onClickButton,isAdd:this.state.isAdd,explanation:this.state.explanation})}}]),t}(r.a.Component),O=Object(k.b)((function(e){return{img:e.gallery.img}}),{setImage:function(e,a){return{type:"SET_IMG",img:{url:e,date:a}}}})(N),F=t(11),A=t.n(F),B=function(e){var a=e.img.map((function(e){return r.a.createElement("div",{key:e.date,className:A.a.galleryItem},r.a.createElement("img",{className:A.a.galleryImage,src:e.url,alt:""}),r.a.createElement("p",null,"Date: ",e.date))}));return r.a.createElement("div",{className:A.a.wrapper},r.a.createElement("h1",null,"Gallery"),r.a.createElement("div",{className:A.a.gallery},a.length>0?a:r.a.createElement("p",{className:A.a.altImage},"You didn't add images")))},D=function(e){Object(m.a)(t,e);var a=Object(u.a)(t);function t(){return Object(i.a)(this,t),a.apply(this,arguments)}return Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement(B,{img:this.props.img})}}]),t}(r.a.Component),G=Object(k.b)((function(e){return{img:e.gallery.img}}),{})(D),U=function(){return r.a.createElement(o.c,null,r.a.createElement(o.a,{path:"/astronomy_picture",component:O}),r.a.createElement(o.a,{path:"/gallery",component:G}))},J=t(33),P=t(7),T=(t(46),function(e){return r.a.createElement("nav",{class:"navbar navbar-expand-lg navbar-dark bg-dark shadow-sm"},r.a.createElement("div",{class:"container"},r.a.createElement("a",{href:"#",class:"navbar-brand"},r.a.createElement("span",{class:"text-uppercase font-weight-bold"},"Astronomy picture")),r.a.createElement("button",{type:"button","data-toggle":"collapse","data-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation",class:"navbar-toggler"},r.a.createElement("span",{class:"navbar-toggler-icon"})),r.a.createElement("div",{id:"navbarSupportedContent",class:"collapse navbar-collapse"},r.a.createElement("ul",{class:"navbar-nav ml-auto"},r.a.createElement("li",{className:"/astronomy_picture"===e.active?"nav-item active":"nav-item",onClick:e.onClick},r.a.createElement(P.b,{className:"nav-link",to:"/astronomy_picture"},"Picture of the day")),r.a.createElement("li",{className:"/gallery"===e.active?"nav-item active":"nav-item",onClick:e.onClick},r.a.createElement(P.b,{className:"nav-link",to:"/gallery"},"Gallery"))))))}),M=function(){var e=Object(o.f)(),a=Object(n.useState)(e.location.pathname),t=Object(J.a)(a,2),l=t[0],c=t[1];return r.a.createElement(T,{onClick:function(a){var t=e.location.pathname;c("/gallery"===t?"/gallery":"/astronomy_picture")},active:l})},q=(t(47),function(){return r.a.createElement("header",null,r.a.createElement(M,null))});var X=function(){return r.a.createElement("div",null,r.a.createElement(q,null),r.a.createElement(U,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var H=t(13),L=Object(H.b)({gallery:x}),R=Object(H.c)(L);window.store=R;var W=R;c.a.render(r.a.createElement(P.a,null,r.a.createElement(k.a,{store:W},r.a.createElement(X,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},8:function(e,a,t){e.exports={wrapper:"astronomyPicture_wrapper__2gd1t",picture:"astronomyPicture_picture__3Xkej",imgInfo:"astronomyPicture_imgInfo__2BbUs",error:"astronomyPicture_error__2LjM7",test:"astronomyPicture_test__1n22_"}}},[[34,1,2]]]);
//# sourceMappingURL=main.b99f2630.chunk.js.map