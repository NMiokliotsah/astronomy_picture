(this.webpackJsonpnasa=this.webpackJsonpnasa||[]).push([[0],{13:function(e,t,a){e.exports={wrapper:"astronomyPicture_wrapper__2gd1t",picture:"astronomyPicture_picture__3Xkej",calendar:"astronomyPicture_calendar__owVfe",error:"astronomyPicture_error__2LjM7"}},23:function(e,t,a){e.exports={wrapper:"Gallery_wrapper__1pmyQ",gallery:"Gallery_gallery__zFfKp"}},32:function(e,t,a){e.exports=a(44)},37:function(e,t,a){},38:function(e,t,a){},44:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(14),c=a.n(l),i=(a(37),a(38),a(2)),o=a(16),s=a(17),m=a(20),u=a(19),g=a(13),d=a.n(g),p=function(){return r.a.createElement("div",{className:"spinner-border text-primary",role:"status"},r.a.createElement("span",{className:"sr-only"},"Loading..."))},v=function(e){return r.a.createElement("div",{className:e.style.calendar},r.a.createElement("input",{name:e.name,type:"date",value:e.value,onChange:e.onChange}))},h=function(e){return r.a.createElement("div",null,r.a.createElement("div",{className:d.a.wrapper},r.a.createElement("div",{className:d.a.picture},e.isFetching&&r.a.createElement(p,null),e.error?r.a.createElement("p",{className:d.a.error},e.error):!e.isFetching&&r.a.createElement("img",{src:e.imageUrl,alt:""})),r.a.createElement(v,{style:d.a,name:"Calendar",value:e.date,onChange:e.handlerCalendar}),r.a.createElement("button",{disabled:e.isAdd,className:"btn btn-primary",onClick:e.onClickButton},"Add picture to gallery")))},f=function(e){return fetch("https://api.nasa.gov/planetary/apod?api_key=".concat("3JTXJIJ51tHe1R0q9iq3VbgXJxq7moRTUxaeBsa2","&date=").concat(e)).then((function(e){return e.json()}))},b=function(e){var t=new Date(e),a=""+(t.getMonth()+1),n=""+t.getDate(),r=t.getFullYear();return a.length<2&&(a="0"+a),n.length<2&&(n="0"+n),[r,a,n].join("-")},y=a(9),E=a(30),k=a(26),_={img:[]},w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_IMG":return Object(k.a)(Object(k.a)({},e),{},{img:[].concat(Object(E.a)(e.img),[t.img])});default:return e}},j=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).checkImg=function(e){n.props.img.forEach((function(t){b(t.date)===e&&n.setState({isAdd:!0})}))},n.onClickButton=function(){var e=n.state.error;console.log(n.state.date),e||(n.props.setImage(n.state.imageUrl,n.state.date),n.setState({isAdd:!0}))},n.handlerCalendar=function(e){var t=e.target.value;n.setState({isAdd:!1}),n.checkImg(t),function(e){var t=b(new Date);b(e)===t&&localStorage.removeItem("date")}(t),n.setState({error:null}),(e.target.name="calendar")&&(n.setState({date:t}),function(e){b(new Date(e))!==b(new Date)&&localStorage.setItem("date",e)}(t),n.setState({isFetching:!0}),f(t).then((function(e){var t;!(t=e.url)||!t.includes("image")?(n.setState({error:"Image does not exists"}),n.setState({isFetching:!1})):(n.setState({imageUrl:e.url}),n.setState({error:null}),n.setState({isFetching:!1}))})))},n.state={imageUrl:null,error:null,date:b(new Date),isFetching:!1,isAdd:!1},n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=localStorage.getItem("date");t&&this.setState({date:t});var a=t||this.state.date;this.checkImg(a),this.setState({isFetching:!0}),f(a).then((function(t){e.setState({imageUrl:t.url}),e.setState({isFetching:!1})}))}},{key:"render",value:function(){return r.a.createElement(h,{imageUrl:this.state.imageUrl,handlerCalendar:this.handlerCalendar,date:this.state.date,error:this.state.error,isFetching:this.state.isFetching,onClickButton:this.onClickButton,isAdd:this.state.isAdd})}}]),a}(r.a.Component),N=Object(y.b)((function(e){return{img:e.gallery.img}}),{setImage:function(e,t){return{type:"SET_IMG",img:{url:e,date:t}}}})(j),S=a(23),C=a.n(S),O=function(e){var t=e.img.map((function(e){return r.a.createElement("div",{key:e.date},r.a.createElement("img",{src:e.url,alt:""}),r.a.createElement("p",null,"Date: ",e.date))}));return r.a.createElement("div",{className:C.a.wrapper},r.a.createElement("h1",null,"Gallery"),r.a.createElement("div",{className:"container "+C.a.gallery},t))},I=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){return r.a.createElement(O,{img:this.props.img})}}]),a}(r.a.Component),F=Object(y.b)((function(e){return{img:e.gallery.img}}),{})(I),x=function(){return r.a.createElement(i.c,null,r.a.createElement(i.a,{path:"/astronomy_picture",component:N}),r.a.createElement(i.a,{path:"/gallery",component:F}))},A=a(31),D=a(7),U=function(e){return r.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-light bg-light"},r.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarNav","aria-controls":"navbarNav","aria-expanded":"false","aria-label":"Toggle navigation"},r.a.createElement("span",{className:"navbar-toggler-icon"})),r.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarNav"},r.a.createElement("ul",{className:"navbar-nav"},r.a.createElement("li",{className:"/astronomy_picture"===e.active?"nav-item active":"nav-item",onClick:e.onClick},r.a.createElement(D.b,{className:"nav-link",to:"/astronomy_picture"},"Picture of the day")),r.a.createElement("li",{className:"/gallery"===e.active?"nav-item active":"nav-item",onClick:e.onClick},r.a.createElement(D.b,{className:"nav-link",to:"/gallery"},"Gallery")))))},B=function(){var e=Object(i.f)(),t=Object(n.useState)(e.location.pathname),a=Object(A.a)(t,2),l=a[0],c=a[1];return r.a.createElement(U,{onClick:function(t){var a=e.location.pathname;c("/gallery"===a?"/gallery":"/astronomy_picture")},active:l})},G=function(){return r.a.createElement(B,null)};var J=function(){return r.a.createElement("div",null,r.a.createElement(G,null),r.a.createElement(x,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var M=a(11),P=Object(M.b)({gallery:w}),T=Object(M.c)(P);window.store=T;var q=T;c.a.render(r.a.createElement(D.a,null,r.a.createElement(y.a,{store:q},r.a.createElement(J,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[32,1,2]]]);
//# sourceMappingURL=main.48a1ff36.chunk.js.map